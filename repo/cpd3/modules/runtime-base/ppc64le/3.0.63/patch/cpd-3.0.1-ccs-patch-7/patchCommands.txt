patch deployment spawner-api --patch '{"spec": {"template": {"spec": {"containers": [{"name": "spawner-api-container","image": "{{.DockerRegistryPrefix}}/privatecloud-spawner-api-k8s:v3.13.89-ppc64le"}]}}}}'
patch cm dsx-core-configmap -p '{"metadata": {"labels": {"icpdata_addon_version": "3.0.1-5"}}, "data": {"dsx-hi-server.json": "{\n      \"displayName\": \"DSX Hadoop Integration Proxy\",\n      \"description\": \"Proxy pod for forwarding DSXL python jobs to a registered remote DSX Hadoop Integration edge node.\",\n      \"annotations\": [\n        {\n          \"name\": \"productID\",\n          \"value\": \"ICP4D-addon-DataSciencePremium_HadoopIntegration_Job\"\n        },\n        {\n          \"name\": \"productName\",\n          \"value\": \"IBM Common Core Services for IBM Cloud Pak for Data\"\n        },\n        {\n          \"name\": \"productVersion\",\n          \"value\": \"3.0.1\"\n        },\n        {\n          \"name\": \"cloudpakId\",\n          \"value\": \"eb9998dcc5d24e3eb5b6fb488f750fe2\"\n        },\n        {\n          \"name\": \"cloudpakName\",\n          \"value\": \"IBM Cloud Pak for Data\"\n        },\n        {\n          \"name\": \"cloudpakVersion\",\n          \"value\": \"3.0.1\"\n        },\n        {\n          \"name\": \"productChargedContainers\",\n          \"value\": \"All\"\n        },\n        {\n          \"name\": \"productMetric\",\n          \"value\": \"VIRTUAL_PROCESSOR_CORE\"\n        }\n      ],\n      \"author\": \"IBM\",\n      \"tested\": true,\n      \"isService\": false,\n      \"isHidden\": true,\n      \"runtimeType\": \"dsx-hi\",\n      \"replicas\": 1,\n      \"image\": \"{{.DockerRegistryPrefix}}/privatecloud-dsx-hi-proxy:v3.13.97-ppc64le\",\n      \"privileged\": false,\n      \"command\": [\"/proxy_job\"],\n      \"env\": [\n        {\n          \"name\": \"JOB_EXEC_COMMAND\",\n          \"value\": \"[\\\"/proxy_job\\\"]\"\n        },\n        {\n          \"name\": \"HI_PROXY_LOG_LEVEL\",\n          \"value\": \"INFO\"\n        }\n      ],\n      \"volumes\": [\n        {\n          \"volume\": \"proxy-pod-scripts\",\n          \"mountPath\": \"/cc-home/.scripts/proxy-pods/dsx-hi\",\n          \"subPath\": \".scripts/proxy-pods/dsx-hi\",\n          \"claimName\": \"cc-home-pvc\",\n          \"readOnly\": true\n        },\n        {\n          \"volume\": \"spawner-scripts\",\n          \"mountPath\": \"/cc-home/.scripts/system/spawner\",\n          \"subPath\": \".scripts/system/spawner\",\n          \"claimName\": \"cc-home-pvc\",\n          \"readOnly\": true\n        },\n        {\n          \"volume\": \"common-helper-scripts\",\n          \"mountPath\": \"/cc-home/.scripts/common-helpers\",\n          \"subPath\": \".scripts/common-helpers\",\n          \"claimName\": \"cc-home-pvc\",\n          \"readOnly\": true\n        },\n        {\n          \"volume\": \"custom-certs\",\n          \"mountPath\": \"/cc-home/_global_/security/customer-truststores\",\n          \"subPath\": \"_global_/security/customer-truststores\",\n          \"claimName\": \"cc-home-pvc\",\n          \"readOnly\": true\n        },\n        {\n          \"volume\": \"remote-images\",\n          \"mountPath\": \"/cc-home/_global_/.remote-images/dsx-hi\",\n          \"subPath\": \"_global_/.remote-images/dsx-hi\",\n          \"claimName\": \"cc-home-pvc\",\n          \"readOnly\": true\n        }\n      ],\n      \"lifecycle\": {\n        \"preStop\": {\n          \"exec\": {\n            \"command\": [\"/scripts/job_cancel.sh\"]\n          }\n        }\n      },\n      \"resources\": {\n        \"cpu\": {\n          \"request\": 300,\n          \"minimum\": 300\n        },\n        \"gpu\": {\n          \"request\": -1,\n          \"minimum\": 0\n        },\n        \"memory\": {\n          \"request\": 256,\n          \"minimum\": 256\n        },\n        \"duration\": {\n          \"value\": -1,\n          \"units\": \"unix\"\n        }\n      }\n    }"}}'
