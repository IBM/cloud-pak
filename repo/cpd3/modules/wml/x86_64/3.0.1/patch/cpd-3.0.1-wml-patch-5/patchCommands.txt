set env deployment wmltraining IMAGE_TAG=v.0.1.2681.0.27
patch cm wmltrainingconfigmap -p '{"data": {"trainingService.conf": "akka {\n  loggers = [\"akka.event.Logging$DefaultLogger\"]\n  loglevel = \"WARNING\"\n  logging-filter = \"akka.event.slf4j.Slf4jLoggingFilter\"\n  http {\n    server {\n      max-connections = 1024\n      idle-timeout = 130s\n      request-timeout = 200s\n    }\n  }\n}\nstructured-logging {\n  json-format = false\n  pretty-print = false\n  component-name = \"wml-training\"\n}\nservice {\n supported_training_runtimes = [\"pytorch-onnx_1.3-py3.7\", \"pytorch-onnx_1.3-py3.7-edt\", \"tensorflow_2.1-py3.7\", \"tensorflow_1.15-py3.6\" ,\"pytorch-onnx_1.2-py3.6\" ,\"pytorch-onnx_1.2-py3.6-edt\", \"pytorch-onnx_1.1-py3.6\" ,\"pytorch-onnx_1.1-py3.6-edt\"] \n deprecated_training_runtimes = [\"tensorflow_1.15-py3.6\" ,\"pytorch-onnx_1.2-py3.6\" ,\"pytorch-onnx_1.2-py3.6-edt\", \"pytorch-onnx_1.1-py3.6\" ,\"pytorch-onnx_1.1-py3.6-edt\"] \n dl_runtimes_mapping = { \n pytorch-onnx_1.1-py3.6 = \"PyTorch\" \n pytorch-onnx_1.1-py3.6-edt = \"edtPyTorch\" \n pytorch-onnx_1.2-py3.6 = \"PyTorch\" \n pytorch-onnx_1.3-py3.7 = \"PyTorch\" \n pytorch-onnx_1.3-py3.7-edt = \"edtPyTorch\"  \n pytorch-onnx_1.2-py3.6-edt = \"edtPyTorch\"  \n tensorflow_2.1-py3.7 = \"tensorflow\" \n tensorflow_1.15-py3.6 = \"tensorflow\" \n } \n     rmq-icd=false\n      redis-icd=false\n      wml-training-data-pvc = \"wml-training-data\"\n      validateTokenService.ml.pubkey.path = \"/opt/ibm/training/keys/mltoken.pub\"\n      validateTokenService.icp.pubkey.path = \"/user-home/public.pem\"\n      enable-ssl = true\n      enable-queue = false\n      runtimes = [\"scala-spark-2.1\", \"scala-spark-2.3\"]\n      request.timeout.seconds = 115\n      threadpool.size = 150\n      training-job {\n        image = \"{{.DockerRegistryPrefix}}/wmltrainingservicehydra\"\n        default.version = \"v.0.1.2681.0.27\"\n        mem = \"512Mi\"\n        cpu = 1.0\n        training-affinity = \"wml\"\n      }\n      http {\n        port = 13300\n      }\n  \n      security {\n        key-store = \"/opt/ibm/training/keys/keystore.jks\"\n        key-store-type = \"JKS\"\n      }\n      repository {\n        url = \"https://internal-nginx-svc:12443\"\n        retries = 2\n        retry-interval = 10s\n      }\n      cloudant {\n        db-name = \"d21sLXRyYWluaW5n\"\n        port = 6984\n        cleanup.interval.hours = 24\n        cleanup.older.days = 14\n        cleanup.delay.ms = 500\n      }\n      spark {\n      timeout = 300\n      version = 2\n      retry = 2\n      hummingbird {\n          host = \"internal-nginx-svc\"\n          port = 12443\n          application_jar_location = \"/opt/ibm/third-party/libs/spark2/spark_pipeline_job.jar\"\n          default_template = \"spark-2.4.0-wml-template\"\n          default_engine_type = \"spark\"\n          default_hw_spec {\n            num_executors = 2\n            cpu = \"1\"\n            mem = \"1g\"\n          }\n      }\n    }\n      api-docs {\n        url = \"http://watson-ml-api.mybluemix.net/\"\n      }\n      wmla {\n        use_proxy = false\n        proxy_host = \"9.21.55.13\"\n        proxy_port = 30123\n        use_url_metrics=true\n      }\n      rabbitmq {\n        subscriber.timeout.seconds = 60\n        exchange = \"training-prod\"\n        queue_expiration_hours = 24\n        threadpool.size = 100\n      }\n      compute {\n        tshirt_sizes {\n          xs.cpu = \"1\"\n          xs.mem = \"4Gi\"\n          s.cpu = \"2\"\n          s.mem = \"8Gi\"\n          m.cpu = \"4\"\n          m.mem = \"16Gi\"\n          l.cpu = \"8\"\n          l.mem = \"32Gi\"\n          xl.cpu = \"16\"\n          xl.mem = \"64Gi\"\n        }\n      }\n      auto_ai.kb {\n        image = \"{{.DockerRegistryPrefix}}/wml-autoai-kb\"\n        software_spec = \"autoai-kb_3.1-py3.7\"\n        default.version = \"v.0.1.414.0.26\"\n        port = 5449\n        retries = 2\n        retry-interval = 60s\n      }\n      federated-learning {\n        image = \"{{.DockerRegistryPrefix}}/federated-learning\"\n        default.version = \"1.1.29\"\n        host = \"$host\"\n        cluster-port = 50443\n        pod-port = 13301\n        del_on_close = true\n      }\n      activeDeadlineSeconds = 604800\n    \n      kube-config {\n        encrypted-certificate-authority = \"/opt/ibm/wml-training/encrypted/ca.pem\"\n        encrypted-client-certificate = \"/opt/ibm/wml-training/encrypted/admin.pem\"\n        encrypted-client-key = \"/opt/ibm/wml-training/encrypted/admin-key.pem\"\n        yaml = \"/opt/ibm/wml-training/kube-config.yml\"\n      }\n     training-affinity = \"wml\"\n      job.coordinator=\"remote\"\n    }\n"},"name": "wmltrainingconfigmap"}'

patch cm wmlrepositoryconfigmap -p '{"data": {"mlrepositoryService.conf": "    repository-dispatcher {\n      type = \"Dispatcher\"\n      executor = \"fork-join-executor\"\n      fork-join-executor {\n        parallelism-min = 6\n        parallelism-factor = 32\n        parallelism-max = 128\n        throughput = 1\n      }\n    }\n\n    service {\n      validateTokenService.ml.pubkey.path = \"/opt/ibm/repository/keys/mltoken.pub\"\n      validateTokenService.icp.pubkey.path = \"/user-home/public.pem\"\n      repository {\n        timeout = 118 seconds\n        validationtime = 59 seconds\n        camsvalidationtime = 220 seconds\n        bulkSize = 100\n        cloudant {\n          dbName = \"mlrepository-db\"\n          port = 6984\n          icp_cloudant_host = \"https://couchdb-ha-svc\"\n        }\n        self.uri.old = true\n        icp.self.uri = \"https://wmlproxyservice:443\"\n        http.port = 8080\n        ssl {\n          port = 12505\n          keystore {\n            type = \"JKS\"\n          }\n        }\n        showDebugMsgsIfEnabled = true\n\n        mgr_start_tracking = false\n        mgr_block_write = false\n        mgr_switch_to_kpbucket = true\n      }\n\n      limits {\n        default.models.limit.count = 1000\n        default.models.limit.size = 2147483648\n        plans = [\n          {\n            id = \"5325f63a-683a-47f0-a04e-97e371385588\"\n            models.limit.count = 200\n            models.limit.size = 2147483648\n          }\n          {\n            id = \"6a4afd93-4e9d-4f4f-92c7-04b9b1542084\"\n          }\n        ]\n      }\n\n      iam {\n        url = \"dummy\"\n        pdp {\n          serviceName = \"pm-20-dev\"\n          apiKey = \"\"\n        }\n      }\n      wml_deployment {\n        url = \"https://internal-nginx-svc:12443/v4/deployments\"\n      }\n      wml_instances {\n        url = \"https://internal-nginx-svc:12443/v4/wml_instances\"\n      }\n    }\n\n    COS\n      {\n        threads = 10\n        upload_size = 16\n        pipelineBucketName = pipeline-fvt\n        modelsBucketName = models-fvt\n        trainingBucketName = training-models-fvt\n        runtimesBucketName = runtimes-fvt\n        libraryBucketName = library-fvt\n        functionsBucketName = functions-dfvt\n\n        wml_pipelineBucketName = wml-pipeline-fvt\n        wml_modelsBucketName = wml-models-fvt\n        wml_trainingBucketName = wml-training-models-fvt\n        wml_functionsBucketName = wml-functions-fvt\n        wml_runtimesBucketName = wml-runtimes-fvt\n        wml_libraryBucketName = wml-libraries-fvt\n      }\n\n    ml-event-client {\n      topicSpace = \"misc\"\n    }\n\n    rabbitmq {\n      subscriber.timeout.seconds = 10\n      exchange = \"wml-repository-fvt\"\n      threadpool.size = 50\n      queue = \"repository-queue\"\n    }\n\n    akka.http {\n      server {\n        parsing = ${akka.http.parsing}\n      }\n\n      client {\n        parsing = ${akka.http.parsing}\n      }\n\n      host-connection-pool {\n        max-open-requests = 256\n        max-connections = 64\n      }\n\n      parsing {\n        max-content-length = 10000m\n      }\n    }\n\n    akka {\n      http.server.request-timeout=240 s\n      http.server.idle-timeout=240 s\n      loglevel = \"ERROR\"\n\n      actor {\n        default-dispatcher {\n          default-executor {\n            fallback: \"fork-join-executor\"\n          }\n          executor = \"fork-join-executor\"\n          fork-join-executor {\n            parallelism-min = 6\n            parallelism-factor = 32\n            parallelism-max = 128\n            throughput = 1\n          }\n        }\n      }\n    }"},"name": "wmlrepositoryconfigmap"}'

patch cm wmlruntimemanager -p '{"data": {"deployment-fvt.yaml": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: wml-scoring-d1\n  namespace: {{.Namespace}}\nspec:\n  revisionHistoryLimit: 3 #keep last 3 rs\n  replicas: 1\n  selector:\n    matchLabels:\n      app: wml-scoring\n      isDynamic: true\n  template:\n    metadata:\n      labels:\n        app: wml-scoring\n        chart: \"ibm-wml-prod\"\n        release: \"wml\"\n        heritage: \"Tiller\"\n        app.kubernetes.io/managed-by: Tiller\n        app.kubernetes.io/instance: wml\n        app.kubernetes.io/name: \"wml\"\n        helm.sh/chart: \"ibm-wml-prod-3.0.1\"\n      annotations:\n        cloudpakName: IBM Cloud Pak for Data\n        cloudpakId: eb9998dcc5d24e3eb5b6fb488f750fe2\n        cloudpakVersion: 3.0.1\n        productName: IBM Watson Machine Learning for IBM Cloud Pak for Data\n        productID: ICP4D-Watson-Machine-Learning-3-0-1\n        productVersion: 3.0.1\n        productMetric: VIRTUAL_PROCESSOR_CORE\n        productChargedContainers: All           \n    spec:\n      containers:\n      - name: runtime-container\n        image: \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\"\n        envFrom:\n        - secretRef:\n            name: wml-scoring-svc-secret\n        - secretRef:\n            name: wdp-service-id\n        livenessProbe:\n          httpGet:\n            path: /v3/scoring/online/heartbeat\n            port: 16500\n            scheme: HTTPS\n          failureThreshold: 10\n          initialDelaySeconds: 185\n          periodSeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n        readinessProbe:\n          httpGet:\n            path: /v3/scoring/online/heartbeat\n            port: 16500\n            scheme: HTTPS\n          failureThreshold: 10\n          initialDelaySeconds: 180\n          periodSeconds: 60\n          timeoutSeconds: 5\n          successThreshold: 1\n        volumeMounts:\n        - name: configvolume\n          mountPath: \"/opt/ibm/scoring/python/conf-rt\"\n        - name: pythoncommon\n          mountPath: \"/opt/ibm/scoring/python/conf-common\"\n        - name: user-home-mount\n          mountPath: \"/user-home/_global_/config/jwt/\"\n          readOnly: true\n          subPath: \"_global_/config/jwt/\"\n        - name: wmlkafka\n          mountPath: \"/opt/ibm/wml-kafka\"\n        - name: service-token\n          mountPath: \"/var/run/secrets/kubernetes.io/serviceaccount\"\n        - name: internalpubkey\n          mountPath: \"/etc/pki/ca-trust/source/anchors\"\n        - name: keystore\n          mountPath: \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\"\n        resources:\n          limits:\n            cpu: 1\n            memory: 256Mi\n          requests:\n            cpu: 1\n            memory: 256Mi\n        env:\n         - name: WMLENV\n           value: fvt\n         - name: DATACENTRE\n           value: $datacentre\n         - name: INSTANCE_ID\n           value: instanceid\n         - name: INSTANCE_PREFIX\n           value: services/wml-online-scoring/instances\n         - name: RUNTIME\n           value: Spark\n         - name: POD_TYPE\n           value: INITIAL_POD\n         - name: NODE_NUM\n           value: 1\n         - name: MEMORY\n           value: 256Mi\n         - name: CPU\n           value: 1\n         - name: MEMORY_THRESHOLD\n           value: \"60\"\n         - name: AGT_SERVICE_GRPC_HOST\n           value: localhost:16501\n         - name: DEPLOYMENT_TYPE\n           value: online_scoring\n         - name: WMLNEWRELIC\n           value: \"DISABLED\"\n         - name: DEPLOYMENT_PLATFORM\n           value: \"private\"\n         - name: DEPLOYMENT_PRIVATE\n           value: \"local\"\n         - name: SSL_KEYSTORE_PASSWORD\n           value: DUMMY_VALUE\n         - name: SSL_TRUSTSTORE_PASSWORD\n           value: DUMMY_VALUE\n         - name: GRPC_SERVER_KEY\n           value: DUMMY_VALUE\n         - name: OS_KEY_HEADER_NAME\n           value: dummy\n         - name: OS_KEY_HEADER_VALUE\n           value: dummy\n         - name: RUNTIME_SCHEDULER\n           value: \"ENABLED\"\n         - name: RUNTIME_SCHEDULER_INTERVAL\n           value: \"900\"\n         - name: WS_SERVICE_ID\n           value: dummy\n         - name: WS_SERVICE_ID_CREDENTIALS\n           value: dummy\n        ports:\n          containerPort: 16500\n      volumes:\n      - name: configvolume\n        configMap:\n          name: wmlscoringtf113\n      - name: pythoncommon\n        configMap:\n          name: wmlscoringpythoncommon\n      - name: wmlkafka\n        configMap:\n          name: wmlkafkaconfigmap\n      - name: service-token\n        configMap:\n          name: wmlscoringserviceaccount\n      - name: internalpubkey\n        secret:\n          secretName: internal-nginx-svc-tls\n      - name: keystore\n        configMap:\n          name: keystoreconfig\n      securityContext:\n        runAsUser: 1000320999\n      serviceAccountName: cpd-editor-sa\n","name": "wmlruntimemanager"}}'


patch cm wmlscoringaifunc -p '{"data": { "py_ml_scoring_container_configs.yml" : "flask_server_container_config:\n  app_ser_size: 1024\n\nscoring_container_config:\n  runtimes:\n    ai-function: [\"0.1.368\", \"0.1.368.skl.0.22\", \"0.1.379\"]\n  threshold_memory: 80\n  py_container_type: \"py_ai_container\"\n", "name":"wmlscoringaifunc"}}'


patch cm wmlscoringpyscript10 -p '{"data": { "py_ml_scoring_container_configs.yml" : "flask_server_container_config:\n  app_ser_size: 1024\n\nscoring_container_config:\n  runtimes:\n    py-script: [\"1.0\", \"1.0.py36\", \"1.0.py37\"]\n  threshold_memory: 80\n  py_script:\n    workdir: /home/wmlfuser/py_script\n    in_dir: batch_input_data\n    out_dir: batch_output_data\n    default_asset_meta:\n      metadata:\n        name: \"py-script asset\"\n        description: \"default asset meta for py-script\"\n        tags: []\n        asset_type: \"data_asset\"\n        origin_country: \"us\"\n        rov:\n          mode: 0\n        asset_category: \"USER\"\n      entity:\n        data_asset:\n          mime_type: \"application/zip\"\n          dataset: false\n    default_attachement_meta:\n      asset_type: \"data_asset\"\n      name: \"py-script attachment\"\n      description: \"default attachment meta for py-script\"\n      mime: \"application/zip\"\n      data_partitions: 1\n      private_url: false\n      is_partitioned: false\n    inherited_env:\n      - PATH\n      - DEPLOYMENT_TYPE\n      - RUNTIME\n", "name":"wmlscoringpyscript10"}}'


patch cm wmlruntimemanager -p '{"data": { "ai-function-runtime-config-fvt.json" : "{\n      \"ai-function\": {\n        \"0.1.368\": {\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringaifunc\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"0.1.368.skl.0.22\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringaifunc\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"0.1.379\": {\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringaifunc\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"deprecated_versions\": {\n          \"0.1.368\": {\n            \"reference\": \"Software specification ai-function_0.1-py3.6 is deprecated and will be removed in the future. Use default_py3.7 software specification instead when saving a Python function. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/wmls/wmls-deploy-python-types.html.\"\n          },\n          \"0.1.368.skl.0.22\": {\n            \"reference\": \"Software specification default_py3.6 is deprecated and will be removed in the future. Use default_py3.7 software specification instead when saving a Python function. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/wmls/wmls-deploy-python-types.html.\"\n          }\n        },\n        \"size\": {\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n          \"ai-function_0.1\": {\n          \"ai-function_0.1-py3.6\": \"0.1.368\",\n          \"default_py3.6\": \"0.1.368.skl.0.22\",\n          \"ai-function_0.2-py3.7\": \"0.1.379\",\n          \"default_py3.7\": \"0.1.379\"\n          }\n        },\n        \"policy\": {\n          \"cold\": {\n            \"lite\": {\n              \"retention_period\": \"0\"\n            },\n            \"standard\": {\n              \"retention_period\": \"0\"\n            },\n            \"professional\": {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\": {\n              \"retention_period\": \"0\"\n            }\n          }\n        }\n      },\n      \"status\": \"SUCCESS\",\n      \"os_default_size\": \"204800\"\n    }", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "caffe-runtime-config-fvt.json" : "    {\n      \"caffe\": {\n        \"deprecated_versions\": {\n          \"1.0\": {\n                    \"reference\": \"Caffe 1.0 framework for Watson Machine Learning is deprecated and will be removed in the future. Use other supported frameworks instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          }\n        },\n        \"1.0\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringcaffe10\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"size\": {\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n          \"caffe_1.0\": {\n            \"caffe_1.0-py3\": \"1.0\",\n            \"caffe_1.0-py3.6\": \"1.0\"\n          }\n        },\n        \"policy\": {\n          \"cold\":\n          {\n            \"lite\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"standard\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"professional\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\":\n            {\n              \"retention_period\": \"0\"\n            }\n\n          }\n        }\n      },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"83886080\"\n    }", "name":"wmlruntimemanager"}}'



patch cm wmlruntimemanager -p '{"data": { "do-runtime-config-fvt.json": "{\n  \"do\": {\n    \"12.9\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v3.0-b36\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v3.0-b36\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/do/conf\",\n      \"configvolumemap\": \"wmlscoringdo\",\n      \"keystore\": \"/opt/ibm/do/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },        \n    \"12.10\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v3.0-b36\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v3.0-b36\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/do/conf\",\n      \"configvolumemap\": \"wmlscoringdo\",\n      \"keystore\": \"/opt/ibm/do/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },        \n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"0\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "hybrid-runtime-config-fvt.json": "{\n  \"hybrid\": {\n    \"deprecated_versions\": {\n      \"0.1\": {\n        \"reference\": \"AutoAI models trained in Cloud Pak for Data prior to the 3.0.1 Patch-5 release will be deprecated in the future. Retrain, then redeploy models after Patch-5 is applied. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n      }\n    },\n    \"0.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.367.0.13\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.367.0.13\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\",\n      \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"0.2\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.367.0.13\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.367.0.13\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\",\n      \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"policy\": {\n      \"cold\": {\n        \"lite\": {\n          \"retention_period\": \"0\"\n        },\n        \"standard\": {\n          \"retention_period\": \"0\"\n        },\n        \"professional\": {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\": {\n          \"retention_period\": \"0\"\n        }\n      }\n    },\n    \"runtime_mapping\": {}\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}" },"name": "wmlruntimemanager" }'

patch cm wmlruntimemanager -p '{"data": { "keras-runtime-config-fvt.json" : "{\n      \"keras\": {\n        \"deprecated_versions\": {\n          \"2.2.5\": {\n            \"reference\": \"Keras 2.2.5 framework for Watson Machine Learning is deprecated and will be removed in the future. Use tf.keras APIs in Tensorflow 2.1 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          }\n        },\n        \"2.2.5\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringtf115\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"eol_versions\": {\n          \"2.1.6\": {\n            \"reference\": \"Keras 2.1.6 is not supported in CPD 3.0 release\"\n          },\n          \"2.2.4-tf\": {\n            \"reference\": \"Keras 2.2.4-tf is not supported in CPD 3.0 release\"\n          },\n          \"2.2.4\": {\n            \"reference\": \"Keras 2.2.4 is not supported in CPD 3.0 release\"\n          }\n        },\n        \"size\": {\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n          \"keras_2.2.5\": {\n            \"tensorflow_1.15-py3\": \"2.2.5\",\n            \"tensorflow_1.15-py3.6\": \"2.2.5\",\n            \"default_py3.6\": \"2.2.5\"\n          }\n        },\n        \"policy\": {\n          \"cold\":\n          {\n            \"lite\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"standard\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"professional\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\":\n            {\n              \"retention_period\": \"0\"\n            }\n\n          }\n        }\n      },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"83886080\"\n    }", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"mllib-runtime-config-fvt.json": "{\n  \"mllib\": {\n    \"2.3\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.3:v.0.1.637.0.20\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.3:v.0.1.637.0.20\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\",\n      \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"2.4\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.4:v.0.1.637.0.20\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.4:v.0.1.637.0.20\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\",\n      \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"eol_versions\": {\n      \"2.2\": {\n        \"reference\": \"Spark 2.2 is not supported in CPD 3.0 release\"\n      }\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\": {\n        \"lite\": {\n          \"retention_period\": \"0\"\n        },\n        \"standard\": {\n          \"retention_period\": \"0\"\n        },\n        \"professional\": {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\": {\n          \"retention_period\": \"0\"\n        }\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"204800\"\n}\n","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "py-script-runtime-config-fvt.json" : "{\n      \"py-script\": {\n        \"1.0\": {\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringpyscript10\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"1.0.py36\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringpyscript10\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"1.0.py37\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"configvolumemap\": \"wmlscoringpyscript10\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"deprecated_versions\": {\n          \"1.0\": {\n            \"reference\": \"Software specification ai-function_0.1-py3.6 is deprecated and will be removed in the future. Use default_py3.7 software specification instead when saving a Python script. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/wmls/wmls-deploy-python-types.html.\"\n          },\n          \"1.0.py36\": {\n            \"reference\": \"Software specification default_py3.6 is deprecated and will be removed in the future. Use default_py3.7 software specification instead when saving a Python script. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/wmls/wmls-deploy-python-types.html.\"\n          }\n        },\n        \"size\": {\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n          \"py-script_1.0\": {\n            \"ai-function_0.1-py3.6\": \"1.0\",\n            \"default_py3.6\": \"1.0.py36\",\n            \"default_py3.7\": \"1.0.py37\"\n          }\n        },\n        \"policy\": {\n          \"cold\": {\n            \"lite\": {\n              \"retention_period\": \"0\"\n            },\n            \"standard\": {\n              \"retention_period\": \"0\"\n            },\n            \"professional\": {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\": {\n              \"retention_period\": \"0\"\n            }\n          }\n        }\n      },\n      \"status\": \"SUCCESS\",\n      \"os_default_size\": \"204800\"\n    }", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "pytorch-onnx-runtime-config-fvt.json" : "{\n      \"pytorch-onnx\": {\n        \"deprecated_versions\": {\n          \"1.2\": {\n            \"reference\": \"Pytorch 1.2 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Pytorch 1.3 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          },\n          \"1.1\": {\n            \"reference\": \"Pytorch 1.1 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Pytorch 1.3 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          }\n        },\n        \"1.1\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringpytorchonnx11\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"1.2\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringpytorchonnx12\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"1.3\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringpytorchonnx13-301\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"eol_versions\": {\n          \"1.0\": {\n            \"reference\": \"Pytorch 1.0 is not supported in CPD 3.0 release\"\n          }\n        },\n        \"size\": {\n          \"xsmall\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"policy\": {\n          \"cold\":\n          {\n            \"lite\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"standard\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"professional\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\":\n            {\n              \"retention_period\": \"0\"\n            }\n\n          }\n        },\n        \"runtime_mapping\": {\n          \"pytorch-onnx_1.0\": {\n            \"pytorch-onnx_1.0-py3\": \"1.0\",\n            \"pytorch-onnx_1.0-py3.6\": \"1.0\",\n            \"pytorch_1.0-py3\": \"1.0\",\n            \"pytorch_1.0-py3-edt\": \"1.0\"\n          },\n          \"pytorch-onnx_1.1\": {\n              \"pytorch-onnx_1.1-py3.6\": \"1.1\",\n              \"pytorch-onnx_1.1-py3.6-edt\": \"1.1\"\n          },\n          \"pytorch-onnx_1.2\": {\n              \"pytorch-onnx_1.2-py3.6\": \"1.2\",\n              \"pytorch-onnx_1.2-py3.6-edt\": \"1.2\",\n              \"default_py3.6\": \"1.2\"\n          },\n          \"pytorch-onnx_1.3\": {\n              \"pytorch-onnx_1.3-py3.7\": \"1.3\",\n              \"pytorch-onnx_1.3-py3.7-edt\": \"1.3\",\n              \"default_py3.7\": \"1.3\"\n          }\n        }\n      },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"83886080\"\n    }", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"rshiny-runtime-config-fvt.json": "{\n  \"r-shiny\": {\n    \"0.1\": {\n      \"current_version\":  \"{{.DockerRegistryPrefix}}/wml-app-runtimes-rshiny:v.0.1.37.0.25\",\n      \"next_version\":  \"{{.DockerRegistryPrefix}}/wml-app-runtimes-rshiny:v.0.1.37.0.25\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-apps/runtimes/rshiny/conf\",\n      \"configvolumemap\": \"wmlrshiny\",\n      \"keystore\": \"/opt/ibm/wml-apps/runtimes/rshiny/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n      }\n    },\n    \"runtime_mapping\": {\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "scikit-runtime-config-fvt.json" : "{\n        \"scikit-learn\": {\n          \"deprecated_versions\": {\n            \"0.20\": {\n              \"reference\": \"Scikit-learn 0.20/XGBoost 0.82 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Scikit-learn 0.23/XGBoost 0.90 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n            },\n            \"0.20-0.8-369\": {\n              \"reference\": \"Scikit-learn 0.20/XGBoost 0.80 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Scikit-learn 0.23/XGBoost 0.90 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n            },\n            \"0.22\": {\n              \"reference\": \"Scikit-learn 0.22/XGBoost 0.90 framework with Python 3.6 for Watson Machine Learning is deprecated and will be removed in the future. Use Scikit-learn 0.23/XGBoost 0.90 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n            }\n          },\n          \"0.20\": {\n            \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n            \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n            \"os_min_pods\": \"0\",\n            \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n            \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n            \"configvolumemap\": \"wmlscoringsklearn20\",\n            \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n            \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n            \"keystoremap\": \"wmlsslcertsconfigmap\"\n          },\n          \"0.22\": {\n            \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n            \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n            \"os_min_pods\": \"0\",\n            \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n            \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n            \"configvolumemap\": \"wmlscoringsklearn22\",\n            \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n            \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n            \"keystoremap\": \"wmlsslcertsconfigmap\"\n          },\n          \"0.23\": {\n            \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n            \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n            \"os_min_pods\": \"0\",\n            \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n            \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n            \"configvolumemap\": \"wmlscoringsklearn23-301\",\n            \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n            \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n            \"keystoremap\": \"wmlsslcertsconfigmap\"\n          },\n          \"size\": {\n            \"xsmall\": {\n              \"memory\": \"2Gi\",\n              \"cpu\": \"2\"\n            },\n            \"small\": {\n              \"memory\": \"2Gi\",\n              \"cpu\": \"2\"\n            },\n            \"medium\": {\n              \"memory\": \"4Gi\",\n              \"cpu\": \"2\"\n            },\n            \"large\": {\n              \"memory\": \"6Gi\",\n              \"cpu\": \"2\"\n            },\n            \"xlarge\": {\n              \"memory\": \"8Gi\",\n              \"cpu\": \"2\"\n            },\n            \"batch_small\": {\n              \"memory\": \"2Gi\",\n              \"cpu\": \"2\"\n            },\n            \"batch_medium\": {\n              \"memory\": \"4Gi\",\n              \"cpu\": \"2\"\n            },\n            \"batch_large\": {\n              \"memory\": \"6Gi\",\n              \"cpu\": \"2\"\n            }\n          },\n          \"runtime_mapping\": {\n            \"scikit-learn_0.20\": {\n              \"scikit-learn_0.20-py3\": \"0.20\",\n              \"scikit-learn_0.20-py3.6\": \"0.20\",\n              \"xgboost_0.82-py3\": \"0.20\",\n              \"xgboost_0.82-py3.6\": \"0.20\"\n            },\n            \"xgboost_0.82\": {\n              \"xgboost_0.82-py3\": \"0.20\",\n              \"xgboost_0.82-py3.6\": \"0.20\"\n            },\n            \"xgboost_0.90\": {\n              \"xgboost_0.90-py3\": \"0.22\",\n              \"xgboost_0.90-py3.6\": \"0.22\",\n              \"default_py3.6\": \"0.22\",\n              \"scikit-learn_0.23-py3.7\": \"0.23\",\n              \"default_py3.7\": \"0.23\"\n            },\n            \"scikit-learn_0.22\": {\n              \"scikit-learn_0.22-py3\": \"0.22\",\n              \"scikit-learn_0.22-py3.6\": \"0.22\",\n              \"xgboost_0.90-py3\": \"0.22\",\n              \"xgboost_0.90-py3.6\": \"0.22\",\n              \"default_py3.6\": \"0.22\"\n            },\n            \"scikit-learn_0.23\": {\n              \"scikit-learn_0.23-py3.7\": \"0.23\",\n              \"default_py3.7\": \"0.23\"\n            }\n          },\n          \"policy\": {\n            \"cold\":\n            {\n              \"lite\":\n              {\n                \"retention_period\": \"0\"\n              },\n              \"standard\":\n              {\n                \"retention_period\": \"0\"\n              },\n              \"professional\":\n              {\n                \"retention_period\": \"0\"\n              },\n              \"enterprise\":\n              {\n                \"retention_period\": \"0\"\n              }\n\n            }\n          }\n        },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"204800\"\n    }", "name":"wmlruntimemanager"}}'

 patch cm wmlruntimemanager -p '{"data": {"spss-modeler-runtime-config-fvt.json": "{\n  \"spss-modeler\": {\n    \"18.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/mlonlinespss/conf\",\n      \"configvolumemap\": \"wmlscoringspss\",\n      \"keystore\": \"/opt/ibm/mlonlinespss/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"17.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/mlonlinespss/conf\",\n      \"configvolumemap\": \"wmlscoringspss\",\n      \"keystore\": \"/opt/ibm/mlonlinespss/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"batch\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-batch-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-batch-runtimes-spss18.1:v.0.1.547.0.40\",\n      \"configvolume\":\"/opt/ibm/mlonlinespss/conf\",\n      \"os_min_pods\":\"0\",\n      \"configvolumemap\":\"wmlscoringspss\",\n      \"keystore\": \"/opt/ibm/mlonlinespss/keys/private\",\n      \"keystoremap\": \"wmlsslcertsconfigmap\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"0\"\n}\n","name":"wmlruntimemanager"}}'

 patch cm wmlruntimemanager -p '{"data": { "tensorflow-runtime-config-fvt.json" : "{\n      \"tensorflow\": {\n        \"deprecated_versions\": {\n          \"1.15\": {\n            \"reference\": \"Tensorflow 1.15 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Tensorflow 2.1 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          }\n        },\n        \"1.15\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringtf115\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"2.1\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringtf21-301\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"eol_versions\": {\n          \"1.13\": {\n            \"reference\": \"Tensorflow 1.13 is not supported in CPD 3.0 release\"\n          },\n          \"1.14\": {\n            \"reference\": \"Tensorflow 1.14 is not supported in CPD 3.0 release\"\n          }\n        },\n        \"size\": {\n          \"xsmall\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n            \"tensorflow_1.15\": {\n              \"tensorflow_1.15-py3\": \"1.15\",\n              \"tensorflow_1.15-py3.6\": \"1.15\",\n              \"default_py3.6\": \"1.15\"\n            },\n            \"tensorflow_2.1\": {\n              \"tensorflow_2.1-py3.7\": \"2.1\",\n              \"default_py3.7\": \"2.1\"\n            }\n        },\n        \"policy\": {\n          \"cold\":\n          {\n            \"lite\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"standard\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"professional\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\":\n            {\n              \"retention_period\": \"0\"\n            }\n\n          }\n        }\n      },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"83886080\"\n    }", "name":"wmlruntimemanager"}}'

 patch cm wmlruntimemanager -p '{"data": {"wml-runtime-config-fvt.json": "{\n    \"wml\": {\n      \"1.6\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\",\n        \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\",\n        \"keystoremap\": \"wmlsslcertsconfigmap\"\n      },\n      \"2.0\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\",\n        \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\",\n        \"keystoremap\": \"wmlsslcertsconfigmap\"\n      },\n      \"2.1\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.637.0.20\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\",\n        \"keystore\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/keys/private\",\n        \"keystoremap\": \"wmlsslcertsconfigmap\"\n      },\n      \"size\": {\n        \"small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        },\n        \"xlarge\": {\n          \"memory\": \"8Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        }\n      },\n      \"runtime_mapping\": {\n      },\n      \"policy\": {\n        \"cold\":\n        {\n          \"lite\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"standard\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"professional\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"enterprise\":\n          {\n            \"retention_period\": \"0\"\n          }\n        }\n      }\n    },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"0\"\n}\n","name":"wmlruntimemanager"}}'

 patch cm wmlruntimemanager -p '{"data": { "xgboost-runtime-config-fvt.json" : "{\n      \"xgboost\": {\n        \"deprecated_versions\": {\n          \"0.82\": {\n            \"reference\": \"Scikit-learn 0.20/XGBoost 0.82 framework for Watson Machine Learning is deprecated and will be removed in the future. Use Scikit-learn 0.23/XGBoost 0.90 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          },\n          \"0.90\": {\n            \"reference\": \"XGBoost 0.90 framework with Python 3.6 for Watson Machine Learning is deprecated and will be removed in the future. Use XGBoost 0.90 with default_py3.7 software specification instead. For details, see https://www.ibm.com/support/knowledgecenter/SSQNUZ_3.0.1/wsj/analyze-data/pm_service_supported_frameworks.html\"\n          }\n        },\n        \"0.82\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringsklearn20\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"0.90\": {\n          \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\",\n          \"os_min_pods\": \"0\",\n          \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n          \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n          \"configvolumemap\": \"wmlscoringsklearn22\",\n          \"pythoncommonmap\": \"wmlscoringpythoncommon\",\n          \"keystore\": \"/opt/ibm/scoring/keys/private_ssl\",\n          \"keystoremap\": \"wmlsslcertsconfigmap\"\n        },\n        \"size\": {\n          \"small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          },\n          \"xlarge\": {\n            \"memory\": \"8Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_small\": {\n            \"memory\": \"2Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_medium\": {\n            \"memory\": \"4Gi\",\n            \"cpu\": \"2\"\n          },\n          \"batch_large\": {\n            \"memory\": \"6Gi\",\n            \"cpu\": \"2\"\n          }\n        },\n        \"runtime_mapping\": {\n        },\n        \"policy\": {\n          \"cold\":\n          {\n            \"lite\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"standard\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"professional\":\n            {\n              \"retention_period\": \"0\"\n            },\n            \"enterprise\":\n            {\n              \"retention_period\": \"0\"\n            }\n\n          }\n        }\n      },\n      \"status\":\"NORMAL\",\n      \"os_default_size\": \"0\"\n    }", "name":"wmlruntimemanager"}}'



patch cm wmlruntimemanager -p '{"data": { "runtimeManager.conf" : "akka {\n      loggers = [\"akka.event.slf4j.Slf4jLogger\"]\n      loglevel = \"INFO\"\n\n      log-dead-letters = 10\n      log-dead-letters-during-shutdown = on\n      # log-config-on-start = on\n      http.server.request-timeout = 120 s\n      http.server.idle-timeout = 121 s\n      http.server.parsing.max-content-length = 100m\n\n      actor {\n        default-dispatcher {\n          default-executor {\n            fallback: \"fork-join-executor\"\n          }\n          executor = \"fork-join-executor\"\n          fork-join-executor {\n            parallelism-min = 4\n            parallelism-factor = 64\n            parallelism-max = 128\n            throughput = 1\n          }\n        }\n      }\n\n      scoring-main-dispatcher {\n        type = \"Dispatcher\"\n        executor = \"fork-join-executor\"\n        fork-join-executor {\n          parallelism-min = 8\n          parallelism-factor = 64\n          parallelism-max = 128\n          throughput = 1\n        }\n      }\n\n      scoring-jobs-dispatcher {\n        type = \"Dispatcher\"\n        executor = \"fork-join-executor\"\n        fork-join-executor {\n          parallelism-min = 8\n          parallelism-factor = 64\n          parallelism-max = 128\n          throughput = 1\n        }\n      }\n\n      scoring-deployments-dispatcher {\n        type = \"Dispatcher\"\n        executor = \"fork-join-executor\"\n        fork-join-executor {\n          parallelism-min = 8\n          parallelism-factor = 64\n          parallelism-max = 128\n          throughput = 1\n        }\n      }\n\n      http.host-connection-pool {\n        # The maximum number of open requests accepted into the pool across all\n        # materializations of any of its client flows.\n        # Protects against (accidentally) overloading a single pool with too many client flow materializations.\n        # Note that with N concurrent materializations the max number of open request in the pool\n        # will never exceed N * max-connections * pipelining-limit.\n        # Must be a power of 2 and > 0!\n        max-open-requests = 256\n        max-connections = 64\n      }\n    }\n\n    service {\n\n      # Runtime configuration and runtime deployment template\n      runtime_config = \"/opt/ibm/wml-online-scoring/runtime-manager/conf\"\n      runtime_template = \"/opt/ibm/wml-online-scoring/runtime-manager/conf/deployment-fvt.yaml\"\n      runtime_environment = \"fvt\"\n      kube_cluster_timeout = 120\n      kube_cluster_creation_timeout = 1200\n\n      # Config for Validate Token connection\n      validateTokenService {\n        // public key may be provided via file or url\n        ml.pubkey.path = \"/opt/ibm/wml-online-scoring/runtime-manager/keys/mltoken.pub\"\n        icp.pubkey.path = \"/user-home/_global_/config/jwt/public.pem\"\n      }\n\n      ml_repository {\n        url = \"https://internal-nginx-svc:12443\"\n        spacesGetLimit = 50\n      }\n\n      wmlService {\n        url = \"https://internal-nginx-svc:12443\"\n        timeout = 60\n        icpport = \"31843\"\n      }\n\n      wmlServicePrivate {\n        url = \"https://private.wml-fvt.ml.test.cloud.ibm.com\"\n        timeout = 60\n      }\n\n\n      envoy {\n        url = \"https://wml-os-envoy:32006\"\n      }\n\n      replication.factor = 2\n      //  http.service.interface = \"localhost\"\n      http.service.port = 16500\n\n      enable-ssl = true\n\n      ssl {\n        port = 16500\n        keystore {\n          path = \"/opt/ibm/wml-online-scoring/runtime-manager/keys/private/keystore.jks\"\n          type = \"JKS\"\n        }\n      }\n\n      runtime_manager {\n        deployment {\n          lock_delay = 15 //Minutes\n        }\n      }\n\n      resiliency {\n        delay = 500   // In millisecodns\n        retries = 3\n      }\n\n      iam {\n        url = \"dummy\"\n        pdp {\n          serviceName = \"pm-20-dev\"\n          apiKey = \"\"\n        }\n      }\n\n      kube-config {\n        job.activeDeadlineSeconds = 900\n      }\n\n      wml_instances {\n        url = \"https://wml-fvt.ml.test.cloud.ibm.com/v3/wml_instances\"\n      }\n\n      features {\n        list = [\"SPACES\"]\n      }\n\n      space_access {\n        post = [\"Admin\", \"Editor\"]\n        get = [\"Admin\", \"Editor\", \"Viewer\"]\n        patch = [\"Admin\", \"Editor\"]\n        delete = [\"Admin\", \"Editor\"]\n\n      }\n\n      ml-event-client {\n        topicSpace = \"misc\"\n        messageProcessParallelism = 20\n        v4TopicSpace = \"deployments\"\n      }\n\n      batchapp.jar {\n        name2_3 = \"/opt/ibm/third-party/libs/batch/wml-online-scoring-runner-hummingbird.jar\"\n        mainclass = \"com.ibm.analytics.wml.batch_deploy.runner.application.BatchApp\"\n      }\n\n      hummingbird {\n        url_base = \"https://internal-nginx-svc:12443/ae/\"\n        url_suffix = \"/v2/jobs\"\n      }\n\n      rolling-update {\n        maxThreadsRollingUpdate = 10\n        maxWaitSingleTenant = 1000\n        maxWaitMultiTenant = 2000\n      }\n\n      async_persistant_storage.base_dir = \"/manager-pvc\"\n\n      virtual_deployment {\n        images {\n          scikit_learn_0_20 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\"\n          scikit_learn_0_22 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g3-rt:v.0.1.161.0.66\"\n          xgboost_0_82 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.161.0.66\"\n          xgboost_0_90 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\"\n          scikit_learn_0_23 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py379-g1-rt:v.0.1.161.0.66\"\n        }\n      }\n\n      rabbitmq {\n        subscriber.timeout.seconds = 10\n        exchange = \"scoring-fvt\"\n        queue_expiration_hours = 24\n        threadpool.size = 50\n        queues = [\"non-do-job-queue\", \"do-job-queue\"]\n        do_queue_name = \"do-job-queue\"\n        non_do_queue_name = \"non-do-job-queue\"\n        routing_keys = [\"non_do_routing_key\", \"do_routing_key\"]\n        do_queue_routing_key = \"do_routing_key\"\n        non_do_queue_routing_key = \"non_do_routing_key\"\n      }\n\n      jobs_thread {\n        post_factor = 50\n      }\n\n      aios {\n          skip_list = []\n      }\n\n      pod_spawn {\n        memory_factor = 0.7\n        deploy_by_number = true\n      }\n\n      etcd_fetch_limit = 1200\n      etcd_max_inbound_message_size = 10485760\n\n      node_limits {\n        lite = 1\n        standard = 5\n        professional = 10\n        private = 2\n      }\n\n\n\n      one_node {\n        pod_cleanup {\n          delay_interval = 900\n          interval = 1200\n        }\n      }\n\n      autoai {\n         kb {\n           image_tag = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-autoai_kb_3.0-py3612-g1-rt:v.0.1.161.0.61\"\n           version_prefix = [\"v.0.1.413\", \"v.0.1.296\"]\n         }\n         kbpy37 {\n           image_tag = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-autoai_kb_3.1-py379-g1-rt:v.0.1.161.0.64\"\n         }\n      }\n\n    }\n\n    grpc {\n      service {\n        agent_interface = \"wml-scoring-rt-utils\"\n        agent_port = 16502\n      }\n    }\n    schema_validation {\n          string = [\"string\"]\n          real =  [\"real\", \"double\", \"float*\"]\n          integer = [\"byte\", \"short\",\"int*\",\"long\"]\n          uint = [\"uint*\"]\n          date = [\"date\",\"datetime\",\"timestamp\"]\n          boolean = [\"bool\",\"boolean\"]\n        }", "name":"wmlruntimemanager"}}'

create cm wmlscoringsklearn23-301 --from-literal module=wmldeployment
patch cm wmlscoringsklearn23-301 -p '{"data": { "newrelic.ini" : "# ---------------------------------------------------------------------------\n\n#\n# This file configures the New Relic Python Agent.\n#\n# The path to the configuration file should be supplied to the function\n# newrelic.agent.initialize() when the agent is being initialized.\n#\n# The configuration file follows a structure similar to what you would\n# find for Microsoft Windows INI files. For further information on the\n# configuration file format see the Python ConfigParser documentation at:\n#\n#    http://docs.python.org/library/configparser.html\n#\n# For further discussion on the behaviour of the Python agent that can\n# be configured via this configuration file see:\n#\n#    http://newrelic.com/docs/python/python-agent-configuration\n#\n\n# ---------------------------------------------------------------------------\n\n# Here are the settings that are common to all environments.\n\n[newrelic]\n\n# You must specify the license key associated with your New\n# Relic account. This key binds the Python Agents data to your\n# account in the New Relic service.\nlicense_key = 78ab31635abad63c0ad9eb0f409ed909e642d66c\n\n# The application name. Set this to be the name of your\n# application as you would like it to show up in New Relic UI.\n# The UI will then auto-map instances of your application into a\n# entry on your home dashboard page.\napp_name = wml-os-rt-scikit-learn0.23-fvt\n\n# When \"true\", the agent collects performance data about your\n# application and reports this data to the New Relic UI at\n# newrelic.com. This global switch is normally overridden for\n# each environment below.\nmonitor_mode = true\n\n# Sets the name of a file to log agent messages to. Useful for\n# debugging any issues with the agent. This is not set by\n# default as it is not known in advance what user your web\n# application processes will run as and where they have\n# permission to write to. Whatever you set this to you must\n# ensure that the permissions for the containing directory and\n# the file itself are correct, and that the user that your web\n# application runs as can write to the file. If not able to\n# write out a log file, it is also possible to say \"stderr\" and\n# output to standard error output. This would normally result in\n# output appearing in your web server log.\n#log_file = /tmp/newrelic-python-agent.log\n\n# Sets the level of detail of messages sent to the log file, if\n# a log file location has been provided. Possible values, in\n# increasing order of detail, are: \"critical\", \"error\", \"warning\",\n# \"info\" and \"debug\". When reporting any agent issues to New\n# Relic technical support, the most useful setting for the\n# support engineers is \"debug\". However, this can generate a lot\n# of information very quickly, so it is best not to keep the\n# agent at this level for longer than it takes to reproduce the\n# problem you are experiencing.\nlog_level = info\n\n# High Security Mode enforces certain security settings, and prevents\n# them from being overridden, so that no sensitive data is sent to New\n# Relic. Enabling High Security Mode means that request parameters are\n# not collected and SQL can not be sent to New Relic in its raw form.\n# To activate High Security Mode, it must be set to true in this\n# local .ini configuration file AND be set to true in the\n# server-side configuration in the New Relic user interface. For\n# details, see\n# https://docs.newrelic.com/docs/subscriptions/high-security\nhigh_security = false\n\n# The Python Agent will attempt to connect directly to the New\n# Relic service. If there is an intermediate firewall between\n# your host and the New Relic service that requires you to use a\n# HTTP proxy, then you should set both the \"proxy_host\" and\n# \"proxy_port\" settings to the required values for the HTTP\n# proxy. The \"proxy_user\" and \"proxy_pass\" settings should\n# additionally be set if proxy authentication is implemented by\n# the HTTP proxy. The \"proxy_scheme\" setting dictates what\n# protocol scheme is used in talking to the HTTP proxy. This\n# would normally always be set as \"http\" which will result in the\n# agent then using a SSL tunnel through the HTTP proxy for end to\n# end encryption.\n# proxy_scheme = http\n# proxy_host = hostname\n# proxy_port = 8080\n# proxy_user =\n# proxy_pass =\n\n# Capturing request parameters is off by default. To enable the\n# capturing of request parameters, first ensure that the setting\n# \"attributes.enabled\" is set to \"true\" (the default value), and\n# then add \"request.parameters.*\" to the \"attributes.include\"\n# setting. For details about attributes configuration, please\n# consult the documentation.\n# attributes.include = request.parameters.*\n\n# The transaction tracer captures deep information about slow\n# transactions and sends this to the UI on a periodic basis. The\n# transaction tracer is enabled by default. Set this to \"false\"\n# to turn it off.\ntransaction_tracer.enabled = true\n\n# Threshold in seconds for when to collect a transaction trace.\n# When the response time of a controller action exceeds this\n# threshold, a transaction trace will be recorded and sent to\n# the UI. Valid values are any positive float value, or (default)\n# \"apdex_f\", which will use the threshold for a dissatisfying\n# Apdex controller action - four times the Apdex T value.\ntransaction_tracer.transaction_threshold = apdex_f\n\n# When the transaction tracer is on, SQL statements can\n# optionally be recorded. The recorder has three modes, \"off\"\n# which sends no SQL, \"raw\" which sends the SQL statement in its\n# original form, and \"obfuscated\", which strips out numeric and\n# string literals.\ntransaction_tracer.record_sql = obfuscated\n\n# Threshold in seconds for when to collect stack trace for a SQL\n# call. In other words, when SQL statements exceed this\n# threshold, then capture and send to the UI the current stack\n# trace. This is helpful for pinpointing where long SQL calls\n# originate from in an application.\ntransaction_tracer.stack_trace_threshold = 0.5\n\n# Determines whether the agent will capture query plans for slow\n# SQL queries. Only supported in MySQL and PostgreSQL. Set this\n# to \"false\" to turn it off.\ntransaction_tracer.explain_enabled = true\n\n# Threshold for query execution time below which query plans\n# will not not be captured. Relevant only when \"explain_enabled\"\n# is true.\ntransaction_tracer.explain_threshold = 0.5\n\n# Space separated list of function or method names in form\n# module:function or module:class.function for which\n# additional function timing instrumentation will be added.\ntransaction_tracer.function_trace =\n\n# The error collector captures information about uncaught\n# exceptions or logged exceptions and sends them to UI for\n# viewing. The error collector is enabled by default. Set this\n# to \"false\" to turn it off.\nerror_collector.enabled = true\n\n# To stop specific errors from reporting to the UI, set this to\n# a space separated list of the Python exception type names to\n# ignore. The exception name should be of the form module:class.\nerror_collector.ignore_errors =\n\n# Browser monitoring is the Real User Monitoring feature of the UI.\n# For those Python web frameworks that are supported, this\n# setting enables the auto-insertion of the browser monitoring\n# JavaScript fragments.\nbrowser_monitoring.auto_instrument = true\n\n# A thread profiling session can be scheduled via the UI when\n# this option is enabled. The thread profiler will periodically\n# capture a snapshot of the call stack for each active thread in\n# the application to construct a statistically representative\n# call tree.\nthread_profiler.enabled = true\n\n# Your application deployments can be recorded through the\n# New Relic REST API. To use this feature provide your API key\n# below then use the `newrelic-admin record-deploy` command.\n# api_key =\n\n# ---------------------------------------------------------------------------\n\n#\n# The application environments. These are specific settings which\n# override the common environment settings. The settings related to a\n# specific environment will be used when the environment argument to the\n# newrelic.agent.initialize() function has been defined to be either\n# \"development\", \"test\", \"staging\" or \"production\".\n#\n\n[newrelic:development]\nmonitor_mode = false\n\n[newrelic:test]\nmonitor_mode = false\n\n[newrelic:staging]\napp_name = Python Application Staging\nmonitor_mode = true\n\n[newrelic:production]\nmonitor_mode = true\n\n# ---------------------------------------------------------------------------\n", "name":"wmlscoringsklearn23-301"}}'
patch cm wmlscoringsklearn23-301 -p '{"data": { "py_ml_scoring_container_configs.yml" : "flask_server_container_config:\n  app_ser_size: 1024\n\nscoring_container_config:\n  runtimes:\n    scikit-learn: [\"0.23\"]\n    xgboost: [\"0.90\"]\n  threshold_memory: 80\n  py_container_type: \"py_ml_container\"\n", "name":"wmlscoringsklearn23-301"}}'


create cm wmlscoringpytorchonnx13-301 --from-literal module=wmldeployment
patch cm wmlscoringpytorchonnx13-301 -p '{"data": { "newrelic.ini" : "# ---------------------------------------------------------------------------\n\n#\n# This file configures the New Relic Python Agent.\n#\n# The path to the configuration file should be supplied to the function\n# newrelic.agent.initialize() when the agent is being initialized.\n#\n# The configuration file follows a structure similar to what you would\n# find for Microsoft Windows INI files. For further information on the\n# configuration file format see the Python ConfigParser documentation at:\n#\n#    http://docs.python.org/library/configparser.html\n#\n# For further discussion on the behaviour of the Python agent that can\n# be configured via this configuration file see:\n#\n#    http://newrelic.com/docs/python/python-agent-configuration\n#\n\n# ---------------------------------------------------------------------------\n\n# Here are the settings that are common to all environments.\n\n[newrelic]\n\n# You must specify the license key associated with your New\n# Relic account. This key binds the Python Agents data to your\n# account in the New Relic service.\nlicense_key = 78ab31635abad63c0ad9eb0f409ed909e642d66c\n\n# The application name. Set this to be the name of your\n# application as you would like it to show up in New Relic UI.\n# The UI will then auto-map instances of your application into a\n# entry on your home dashboard page.\napp_name = wml-os-rt-pytorch-onnx13-fvt\n\n\n# When \"true\", the agent collects performance data about your\n# application and reports this data to the New Relic UI at\n# newrelic.com. This global switch is normally overridden for\n# each environment below.\nmonitor_mode = true\n\n# Sets the name of a file to log agent messages to. Useful for\n# debugging any issues with the agent. This is not set by\n# default as it is not known in advance what user your web\n# application processes will run as and where they have\n# permission to write to. Whatever you set this to you must\n# ensure that the permissions for the containing directory and\n# the file itself are correct, and that the user that your web\n# application runs as can write to the file. If not able to\n# write out a log file, it is also possible to say \"stderr\" and\n# output to standard error output. This would normally result in\n# output appearing in your web server log.\n#log_file = /tmp/newrelic-python-agent.log\n\n# Sets the level of detail of messages sent to the log file, if\n# a log file location has been provided. Possible values, in\n# increasing order of detail, are: \"critical\", \"error\", \"warning\",\n# \"info\" and \"debug\". When reporting any agent issues to New\n# Relic technical support, the most useful setting for the\n# support engineers is \"debug\". However, this can generate a lot\n# of information very quickly, so it is best not to keep the\n# agent at this level for longer than it takes to reproduce the\n# problem you are experiencing.\nlog_level = info\n\n# High Security Mode enforces certain security settings, and prevents\n# them from being overridden, so that no sensitive data is sent to New\n# Relic. Enabling High Security Mode means that request parameters are\n# not collected and SQL can not be sent to New Relic in its raw form.\n# To activate High Security Mode, it must be set to true in this\n# local .ini configuration file AND be set to true in the\n# server-side configuration in the New Relic user interface. For\n# details, see\n# https://docs.newrelic.com/docs/subscriptions/high-security\nhigh_security = false\n\n# The Python Agent will attempt to connect directly to the New\n# Relic service. If there is an intermediate firewall between\n# your host and the New Relic service that requires you to use a\n# HTTP proxy, then you should set both the \"proxy_host\" and\n# \"proxy_port\" settings to the required values for the HTTP\n# proxy. The \"proxy_user\" and \"proxy_pass\" settings should\n# additionally be set if proxy authentication is implemented by\n# the HTTP proxy. The \"proxy_scheme\" setting dictates what\n# protocol scheme is used in talking to the HTTP proxy. This\n# would normally always be set as \"http\" which will result in the\n# agent then using a SSL tunnel through the HTTP proxy for end to\n# end encryption.\n# proxy_scheme = http\n# proxy_host = hostname\n# proxy_port = 8080\n# proxy_user =\n# proxy_pass =\n\n# Capturing request parameters is off by default. To enable the\n# capturing of request parameters, first ensure that the setting\n# \"attributes.enabled\" is set to \"true\" (the default value), and\n# then add \"request.parameters.*\" to the \"attributes.include\"\n# setting. For details about attributes configuration, please\n# consult the documentation.\n# attributes.include = request.parameters.*\n\n# The transaction tracer captures deep information about slow\n# transactions and sends this to the UI on a periodic basis. The\n# transaction tracer is enabled by default. Set this to \"false\"\n# to turn it off.\ntransaction_tracer.enabled = true\n\n# Threshold in seconds for when to collect a transaction trace.\n# When the response time of a controller action exceeds this\n# threshold, a transaction trace will be recorded and sent to\n# the UI. Valid values are any positive float value, or (default)\n# \"apdex_f\", which will use the threshold for a dissatisfying\n# Apdex controller action - four times the Apdex T value.\ntransaction_tracer.transaction_threshold = apdex_f\n\n# When the transaction tracer is on, SQL statements can\n# optionally be recorded. The recorder has three modes, \"off\"\n# which sends no SQL, \"raw\" which sends the SQL statement in its\n# original form, and \"obfuscated\", which strips out numeric and\n# string literals.\ntransaction_tracer.record_sql = obfuscated\n\n# Threshold in seconds for when to collect stack trace for a SQL\n# call. In other words, when SQL statements exceed this\n# threshold, then capture and send to the UI the current stack\n# trace. This is helpful for pinpointing where long SQL calls\n# originate from in an application.\ntransaction_tracer.stack_trace_threshold = 0.5\n\n# Determines whether the agent will capture query plans for slow\n# SQL queries. Only supported in MySQL and PostgreSQL. Set this\n# to \"false\" to turn it off.\ntransaction_tracer.explain_enabled = true\n\n# Threshold for query execution time below which query plans\n# will not not be captured. Relevant only when \"explain_enabled\"\n# is true.\ntransaction_tracer.explain_threshold = 0.5\n\n# Space separated list of function or method names in form\n# module:function or module:class.function for which\n# additional function timing instrumentation will be added.\n# transaction_tracer.function_trace =\n\n# The error collector captures information about uncaught\n# exceptions or logged exceptions and sends them to UI for\n# viewing. The error collector is enabled by default. Set this\n# to \"false\" to turn it off.\nerror_collector.enabled = true\n\n# To stop specific errors from reporting to the UI, set this to\n# a space separated list of the Python exception type names to\n# ignore. The exception name should be of the form module:class.\n# error_collector.ignore_errors =\n\n# Browser monitoring is the Real User Monitoring feature of the UI.\n# For those Python web frameworks that are supported, this\n# setting enables the auto-insertion of the browser monitoring\n# JavaScript fragments.\nbrowser_monitoring.auto_instrument = true\n\n# A thread profiling session can be scheduled via the UI when\n# this option is enabled. The thread profiler will periodically\n# capture a snapshot of the call stack for each active thread in\n# the application to construct a statistically representative\n# call tree.\nthread_profiler.enabled = true\n\n# Your application deployments can be recorded through the\n# New Relic REST API. To use this feature provide your API key\n# below then use the `newrelic-admin record-deploy` command.\n# api_key =\n\n# ---------------------------------------------------------------------------\n\n#\n# The application environments. These are specific settings which\n# override the common environment settings. The settings related to a\n# specific environment will be used when the environment argument to the\n# newrelic.agent.initialize() function has been defined to be either\n# \"development\", \"test\", \"staging\" or \"production\".\n#\n\n[newrelic:development]\nmonitor_mode = false\n\n[newrelic:test]\nmonitor_mode = false\n\n[newrelic:staging]\napp_name = Python Application (Staging)\nmonitor_mode = true\n\n[newrelic:production]\nmonitor_mode = true\n\n# ---------------------------------------------------------------------------\n", "name":"wmlscoringpytorchonnx13-301"}}'
patch cm wmlscoringpytorchonnx13-301 -p '{"data": { "py_ml_scoring_container_configs.yml" : "flask_server_container_config:\n  app_ser_size: 1024\n\nscoring_container_config:\n  runtimes:\n    pytorch-onnx: [\"1.3\"]\n  threshold_memory: 80\npy_container_type: \"py_pytorch_onnx_container\"\n", "name":"wmlscoringpytorchonnx13-301"}}'


create cm wmlscoringtf21-301 --from-literal module=wmldeployment
patch cm wmlscoringtf21-301 -p '{"data": { "newrelic.ini" : "# ---------------------------------------------------------------------------\n\n#\n# This file configures the New Relic Python Agent.\n#\n# The path to the configuration file should be supplied to the function\n# newrelic.agent.initialize() when the agent is being initialized.\n#\n# The configuration file follows a structure similar to what you would\n# find for Microsoft Windows INI files. For further information on the\n# configuration file format see the Python ConfigParser documentation at:\n#\n#    http://docs.python.org/library/configparser.html\n#\n# For further discussion on the behaviour of the Python agent that can\n# be configured via this configuration file see:\n#\n#    http://newrelic.com/docs/python/python-agent-configuration\n#\n\n# ---------------------------------------------------------------------------\n\n# Here are the settings that are common to all environments.\n\n[newrelic]\n\n# You must specify the license key associated with your New\n# Relic account. This key binds the Python Agents data to your\n# account in the New Relic service.\nlicense_key = 78ab31635abad63c0ad9eb0f409ed909e642d66c\n\n# The application name. Set this to be the name of your\n# application as you would like it to show up in New Relic UI.\n# The UI will then auto-map instances of your application into a\n# entry on your home dashboard page.\napp_name = wml-os-rt-tensorflow2.1-fvt\n\n# When \"true\", the agent collects performance data about your\n# application and reports this data to the New Relic UI at\n# newrelic.com. This global switch is normally overridden for\n# each environment below.\nmonitor_mode = true\n\n# Sets the name of a file to log agent messages to. Useful for\n# debugging any issues with the agent. This is not set by\n# default as it is not known in advance what user your web\n# application processes will run as and where they have\n# permission to write to. Whatever you set this to you must\n# ensure that the permissions for the containing directory and\n# the file itself are correct, and that the user that your web\n# application runs as can write to the file. If not able to\n# write out a log file, it is also possible to say \"stderr\" and\n# output to standard error output. This would normally result in\n# output appearing in your web server log.\n#log_file = /tmp/newrelic-python-agent.log\n\n# Sets the level of detail of messages sent to the log file, if\n# a log file location has been provided. Possible values, in\n# increasing order of detail, are: \"critical\", \"error\", \"warning\",\n# \"info\" and \"debug\". When reporting any agent issues to New\n# Relic technical support, the most useful setting for the\n# support engineers is \"debug\". However, this can generate a lot\n# of information very quickly, so it is best not to keep the\n# agent at this level for longer than it takes to reproduce the\n# problem you are experiencing.\nlog_level = info\n\n# High Security Mode enforces certain security settings, and prevents\n# them from being overridden, so that no sensitive data is sent to New\n# Relic. Enabling High Security Mode means that request parameters are\n# not collected and SQL can not be sent to New Relic in its raw form.\n# To activate High Security Mode, it must be set to true in this\n# local .ini configuration file AND be set to true in the\n# server-side configuration in the New Relic user interface. For\n# details, see\n# https://docs.newrelic.com/docs/subscriptions/high-security\nhigh_security = false\n\n# The Python Agent will attempt to connect directly to the New\n# Relic service. If there is an intermediate firewall between\n# your host and the New Relic service that requires you to use a\n# HTTP proxy, then you should set both the \"proxy_host\" and\n# \"proxy_port\" settings to the required values for the HTTP\n# proxy. The \"proxy_user\" and \"proxy_pass\" settings should\n# additionally be set if proxy authentication is implemented by\n# the HTTP proxy. The \"proxy_scheme\" setting dictates what\n# protocol scheme is used in talking to the HTTP proxy. This\n# would normally always be set as \"http\" which will result in the\n# agent then using a SSL tunnel through the HTTP proxy for end to\n# end encryption.\n# proxy_scheme = http\n# proxy_host = hostname\n# proxy_port = 8080\n# proxy_user =\n# proxy_pass =\n\n# Capturing request parameters is off by default. To enable the\n# capturing of request parameters, first ensure that the setting\n# \"attributes.enabled\" is set to \"true\" (the default value), and\n# then add \"request.parameters.*\" to the \"attributes.include\"\n# setting. For details about attributes configuration, please\n# consult the documentation.\n# attributes.include = request.parameters.*\n\n# The transaction tracer captures deep information about slow\n# transactions and sends this to the UI on a periodic basis. The\n# transaction tracer is enabled by default. Set this to \"false\"\n# to turn it off.\ntransaction_tracer.enabled = true\n\n# Threshold in seconds for when to collect a transaction trace.\n# When the response time of a controller action exceeds this\n# threshold, a transaction trace will be recorded and sent to\n# the UI. Valid values are any positive float value, or (default)\n# \"apdex_f\", which will use the threshold for a dissatisfying\n# Apdex controller action - four times the Apdex T value.\ntransaction_tracer.transaction_threshold = apdex_f\n\n# When the transaction tracer is on, SQL statements can\n# optionally be recorded. The recorder has three modes, \"off\"\n# which sends no SQL, \"raw\" which sends the SQL statement in its\n# original form, and \"obfuscated\", which strips out numeric and\n# string literals.\ntransaction_tracer.record_sql = obfuscated\n\n# Threshold in seconds for when to collect stack trace for a SQL\n# call. In other words, when SQL statements exceed this\n# threshold, then capture and send to the UI the current stack\n# trace. This is helpful for pinpointing where long SQL calls\n# originate from in an application.\ntransaction_tracer.stack_trace_threshold = 0.5\n\n# Determines whether the agent will capture query plans for slow\n# SQL queries. Only supported in MySQL and PostgreSQL. Set this\n# to \"false\" to turn it off.\ntransaction_tracer.explain_enabled = true\n\n# Threshold for query execution time below which query plans\n# will not not be captured. Relevant only when \"explain_enabled\"\n# is true.\ntransaction_tracer.explain_threshold = 0.5\n\n# Space separated list of function or method names in form\n# module:function or module:class.function for which\n# additional function timing instrumentation will be added.\n# transaction_tracer.function_trace =\n\n# The error collector captures information about uncaught\n# exceptions or logged exceptions and sends them to UI for\n# viewing. The error collector is enabled by default. Set this\n# to \"false\" to turn it off.\nerror_collector.enabled = true\n\n# To stop specific errors from reporting to the UI, set this to\n# a space separated list of the Python exception type names to\n# ignore. The exception name should be of the form module:class.\n# error_collector.ignore_errors =\n\n# Browser monitoring is the Real User Monitoring feature of the UI.\n# For those Python web frameworks that are supported, this\n# setting enables the auto-insertion of the browser monitoring\n# JavaScript fragments.\nbrowser_monitoring.auto_instrument = true\n\n# A thread profiling session can be scheduled via the UI when\n# this option is enabled. The thread profiler will periodically\n# capture a snapshot of the call stack for each active thread in\n# the application to construct a statistically representative\n# call tree.\nthread_profiler.enabled = true\n\n# Your application deployments can be recorded through the\n# New Relic REST API. To use this feature provide your API key\n# below then use the `newrelic-admin record-deploy` command.\n# api_key =\n\n# ---------------------------------------------------------------------------\n\n#\n# The application environments. These are specific settings which\n# override the common environment settings. The settings related to a\n# specific environment will be used when the environment argument to the\n# newrelic.agent.initialize() function has been defined to be either\n# \"development\", \"test\", \"staging\" or \"production\".\n#\n\n[newrelic:development]\nmonitor_mode = false\n\n[newrelic:test]\nmonitor_mode = false\n\n[newrelic:staging]\napp_name = Python Application (Staging)\nmonitor_mode = true\n\n[newrelic:production]\nmonitor_mode = true\n\n# ---------------------------------------------------------------------------\n", "name":"wmlscoringtf21-301"}}'
patch cm wmlscoringtf21-301 -p '{"data": { "py_ml_scoring_container_configs.yml" : "flask_server_container_config:\n  app_ser_size: 1024\n\nscoring_container_config:\n  runtimes:\n    tensorflow: [\"2.1\"]\n  keras_to_tf_convert: False\n  threshold_memory: 80\npy_container_type: \"py_tensorflow_container\"\n", "name":"wmlscoringtf21-301"}}'




patch deployment  wmlrepository --patch '{"spec": {"template": {"spec": {"containers": [{"image": "{{.DockerRegistryPrefix}}/mlrepositoryservicehydra:v.0.1.1474.0.24","name": "wmlrepositoryservice","resources": {"limits": {"cpu": "2","memory": "3Gi"}}}]}}}}'

patch deployment  wmltraining --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wmltrainingservice","image": "{{.DockerRegistryPrefix}}/wmltrainingservicehydra:v.0.1.2681.0.27","env":[{"name":"IMAGE_TAG","value":"v.0.1.2681.0.27"}]}]}}}}'

patch deployment  wmltrainingorchestrator  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wmltrainingorchestrator","image": "{{.DockerRegistryPrefix}}/wmltrainingservicehydra:v.0.1.2681.0.27"}]}}}}'

patch statefulset  wml-etcd  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-etcd","image": "{{.DockerRegistryPrefix}}/etcd-ubi:v.v3.3.19"}]}}}}'

patch deployment  wml-os-envoy  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-os-envoy","image": "{{.DockerRegistryPrefix}}/wml-os-envoy:v.0.1.195.0.10"}]}}}}'

patch statefulset  wml-scoring-rt-utils  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "agent-container","image": "{{.DockerRegistryPrefix}}/wml-os-runtime-agent:v.0.1.540.0.19"}]}}}}'

patch statefulset  wml-os-manager  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "runtimemanagercontainer","image": "{{.DockerRegistryPrefix}}/wml-os-runtime-manager:v.0.1.975.0.59"}]}}}}'

patch deployment  wml-main  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-main","image": "{{.DockerRegistryPrefix}}/wml-main:3.0.5531"}]}}}}'

