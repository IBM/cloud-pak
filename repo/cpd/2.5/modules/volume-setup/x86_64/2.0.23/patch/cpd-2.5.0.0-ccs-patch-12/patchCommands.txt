run patch-cc-home-requisite-job --generator run-pod/v1 --image {{.DockerRegistryPrefix}}/dsx-requisite:v1.0.864-x86_64 --replicas 1 --restart OnFailure --overrides '{"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["amd64","ppc64le"]}]}]}}},"containers":[{ "command": ["/bin/sh", "-c", "cp -rpu /cc-home-content/_global_/python-3.7 /cc-home/_global_/; cp -rpu /cc-home-content/.scripts/proxy-pods/dsx-hi /cc-home/.scripts/proxy-pods/; kubectl delete pod patch-cc-home-requisite-job"], "image":"{{.DockerRegistryPrefix}}/dsx-requisite:v1.0.864-x86_64","imagePullPolicy":"IfNotPresent","name":"patched-cc-home-requisite-job-container","resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"15m","memory":"64Mi"}},"volumeMounts": [{"mountPath": "/cc-home", "name": "cc-home-mount"} ], "securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"privileged":false,"readOnlyRootFilesystem":false,"runAsNonRoot":true}}],"restartPolicy":"OnFailure","securityContext":{"runAsNonRoot":true,"runAsUser":1000320999},"volumes": [ {"name": "cc-home-mount", "persistentVolumeClaim": {"claimName": "cc-home-pvc"}} ],"serviceAccount":"cpd-editor-sa","serviceAccountName":"cpd-editor-sa"}}'
run patch-user-home-requisite-job --generator run-pod/v1 --image {{.DockerRegistryPrefix}}/dsx-requisite:v1.0.864-x86_64 --replicas 1 --restart OnFailure --overrides '{"spec":{"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchExpressions":[{"key":"beta.kubernetes.io/arch","operator":"In","values":["amd64","ppc64le"]}]}]}}},"containers":[{"command": ["/bin/sh", "-c", "pythonPackageOwner=1000330999; cp -ru /user-home-content/_global_/python-3.7 /user-home/_global_/;sudo chown -R ${pythonPackageOwner}:wslocal /user-home/_global_/python-3.7; kubectl delete pod patch-user-home-requisite-job"],"image":"{{.DockerRegistryPrefix}}/dsx-requisite:v1.0.864-x86_64","imagePullPolicy":"IfNotPresent","name":"patched-user-home-requisite-job-container","resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"15m","memory":"64Mi"}},"volumeMounts": [{"mountPath": "/user-home", "name": "user-home-mount"} ], "securityContext":{"capabilities":{"drop":["KILL","MKNOD"]},"runAsNonRoot":true}}],"restartPolicy":"OnFailure","securityContext":{"runAsNonRoot":true,"runAsUser":1000321000},"volumes": [ {"name": "user-home-mount", "persistentVolumeClaim": {"claimName": "user-home-pvc"}} ],"serviceAccount":"cpd-admin-sa","serviceAccountName":"cpd-admin-sa"}}'
