patch cm wmltrainingconfigmap -p '{"data": {"trainingService.conf": "akka {\n  loggers = [\"akka.event.Logging$DefaultLogger\"]\n  loglevel = \"WARNING\"\n  logging-filter = \"akka.event.slf4j.Slf4jLoggingFilter\"\n\n  http {\n    server {\n      max-connections = 1024\n      idle-timeout = 130s\n      request-timeout = 200s\n    }\n\n  }\n\n}\n\nservice {\n      rmq-icd=false\n      redis-icd=false\n      wml-training-data-pvc = \"wml-training-data\"\n\n      validateTokenService.ml.pubkey.path = \"/opt/ibm/training/keys/mltoken.pub\"\n      validateTokenService.icp.pubkey.path = \"/user-home/_global_/config/jwt/public.pem\"\n\n      enable-ssl = true\n      enable-queue = false\n      runtimes = [\"scala-spark-2.1\", \"scala-spark-2.3\"]\n      request.timeout.seconds = 115\n\n      threadpool.size = 150\n\n      http {\n        port = 13300\n      }\n\n      security {\n        key-store = \"/opt/ibm/training/keys/icpkeystore.jks\"\n        key-store-type = \"JKS\"\n      }\n\n\n      repository {\n        url = \"https://internal-nginx-svc:12443\"\n      }\n\n      cloudant {\n        db-name = \"d21sLXRyYWluaW5n\"\n        port = 6984\n        cleanup.interval.hours = 24\n        cleanup.older.days = 14\n        cleanup.delay.ms = 500\n      }\n\n      api-docs {\n        url = \"http://watson-ml-api.mybluemix.net/\"\n      }\n\n      wmla {\n        use_proxy = false\n        proxy_host = \"9.21.55.13\"\n        proxy_port = 30123\n        use_url_metrics=true\n      }\n\n      rabbitmq {\n        subscriber.timeout.seconds = 60\n        exchange = \"training-prod\"\n        queue_expiration_hours = 24\n        threadpool.size = 100\n      }\n\n\n\n      compute {\n        tshirt_sizes {\n          xs.cpu = \"1\"\n          xs.mem = \"4Gi\"\n\n          s.cpu = \"2\"\n          s.mem = \"8Gi\"\n\n          m.cpu = \"4\"\n          m.mem = \"16Gi\"\n\n          l.cpu = \"8\"\n          l.mem = \"32Gi\"\n\n          xl.cpu = \"16\"\n          xl.mem = \"64Gi\"\n        }\n      }\n\n      auto_ai.kb {\n        image = \"{{.DockerRegistryPrefix}}/wml-autoai-kb\"\n        default.version = \"v.0.1.296.0.9\"\n        port = 5449\n    }\n\n      kube-config {\n        encrypted-certificate-authority = \"/opt/ibm/wml-training/encrypted/ca.pem\"\n        encrypted-client-certificate = \"/opt/ibm/wml-training/encrypted/admin.pem\"\n        encrypted-client-key = \"/opt/ibm/wml-training/encrypted/admin-key.pem\"\n        yaml = \"/opt/ibm/wml-training/kube-config.yml\"\n      }\n\n      training-affinity = \"wml\"\n    }\n"},"name": "wmltrainingconfigmap"}'

patch cm wmlruntimemanager -p '{"data": { "ai-function-runtime-config-fvt.json": "{\n  \"ai-function\": {\n    \"0.1.368\": {\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.61.0.5\",\n      \"os_min_pods\": \"0\",\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-mc3-py368-g1-rt:v.0.1.61.0.5\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"configvolumemap\": \"wmlscoringaifunc\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n      \"ai-function_0.1\": {\n      \"ai-function_0.1-py3.6\": \"0.1.368\"\n      }\n    },\n    \"policy\": {\n      \"cold\": {\n        \"lite\": {\n          \"retention_period\": \"0\"\n        },\n        \"standard\": {\n          \"retention_period\": \"0\"\n        },\n        \"professional\": {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\": {\n          \"retention_period\": \"0\"\n        }\n      }\n    }\n  },\n  \"status\": \"SUCCESS\",\n  \"os_default_size\": \"204800\"\n}", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "runtimeManager.conf": "akka {\n  loggers = [\"akka.event.slf4j.Slf4jLogger\"]\n  loglevel = \"INFO\"\n\n  log-dead-letters = 10\n  log-dead-letters-during-shutdown = on\n  # log-config-on-start = on\n  http.server.request-timeout = 120 s\n  http.server.idle-timeout = 121 s\n  http.server.parsing.max-content-length = 100m\n\n  actor {\n    default-dispatcher {\n      default-executor {\n        fallback: \"fork-join-executor\"\n      }\n      executor = \"fork-join-executor\"\n      fork-join-executor {\n        parallelism-min = 4\n        parallelism-factor = 64\n        parallelism-max = 128\n        throughput = 1\n      }\n    }\n  }\n\n  scoring-main-dispatcher {\n    type = \"Dispatcher\"\n    executor = \"fork-join-executor\"\n    fork-join-executor {\n      parallelism-min = 8\n      parallelism-factor = 64\n      parallelism-max = 128\n      throughput = 1\n    }\n  }\n\n  scoring-jobs-dispatcher {\n    type = \"Dispatcher\"\n    executor = \"fork-join-executor\"\n    fork-join-executor {\n      parallelism-min = 8\n      parallelism-factor = 64\n      parallelism-max = 128\n      throughput = 1\n    }\n  }\n\n  scoring-deployments-dispatcher {\n    type = \"Dispatcher\"\n    executor = \"fork-join-executor\"\n    fork-join-executor {\n      parallelism-min = 8\n      parallelism-factor = 64\n      parallelism-max = 128\n      throughput = 1\n    }\n  }\n\n  http.host-connection-pool {\n    # The maximum number of open requests accepted into the pool across all\n    # materializations of any of its client flows.\n    # Protects against (accidentally) overloading a single pool with too many client flow materializations.\n    # Note that with N concurrent materializations the max number of open request in the pool\n    # will never exceed N * max-connections * pipelining-limit.\n    # Must be a power of 2 and \u003e 0!\n    max-open-requests = 256\n    max-connections = 64\n  }\n}\n\nservice {\n\n  # Runtime configuration and runtime deployment template\n  runtime_config = \"/opt/ibm/wml-online-scoring/runtime-manager/conf\"\n  runtime_template = \"/opt/ibm/wml-online-scoring/runtime-manager/conf/deployment-fvt.yaml\"\n  runtime_environment = \"fvt\"\n  kube_cluster_timeout = 120\n  kube_cluster_creation_timeout = 600\n\n  # Config for Validate Token connection\n  validateTokenService {\n    // public key may be provided via file or url\n    ml.pubkey.path = \"/opt/ibm/wml-online-scoring/runtime-manager/keys/mltoken.pub\"\n    icp.pubkey.path = \"/user-home/_global_/config/jwt/public.pem\"\n  }\n\n  ml_repository {\n    url = \"https://internal-nginx-svc:12443\"\n    spacesGetLimit = 50\n  }\n\n  wmlService {\n    url = \"https://internal-nginx-svc:12443\"\n    timeout = 60\n    icpport = \"31843\"\n  }\n\n  envoy {\n    url = \"https://wml-os-envoy:32006\"\n  }\n\n  replication.factor = 2\n  //  http.service.interface = \"localhost\"\n  http.service.port = 16500\n\n  enable-ssl = true\n\n  ssl {\n    port = 16500\n    keystore {\n      path = \"/opt/ibm/wml-online-scoring/runtime-manager/keys/private/keystore.jks\"\n      type = \"JKS\"\n    }\n  }\n\n  runtime_manager {\n    deployment {\n      lock_delay = 15 //Minutes\n    }\n  }\n\n  resiliency {\n    delay = 500   // In millisecodns\n    retries = 3\n  }\n\n  iam {\n    url = \"dummy\"\n    pdp {\n      serviceName = \"pm-20-dev\"\n      apiKey = \"\"\n    }\n  }\n\n  kube-config {\n    job.activeDeadlineSeconds = 900\n  }\n\n  wml_instances {\n    url = \"https://wml-fvt.ml.test.cloud.ibm.com/v3/wml_instances\"\n  }\n\n  features {\n    list = [\"SPACES\"]\n  }\n\n  space_access {\n    post = [\"Admin\", \"Editor\"]\n    get = [\"Admin\", \"Editor\", \"Viewer\"]\n    patch = [\"Admin\", \"Editor\"]\n    delete = [\"Admin\", \"Editor\"]\n\n  }\n\n  ml-event-client {\n    topicSpace = \"misc\"\n    messageProcessParallelism = 20\n    v4TopicSpace = \"deployments\"\n  }\n\n  batchapp.jar {\n    name2_3 = \"/opt/ibm/third-party/libs/batch/wml-online-scoring-runner-hummingbird.jar\"\n    mainclass = \"com.ibm.analytics.wml.batch_deploy.runner.application.BatchApp\"\n  }\n\n  hummingbird {\n    url_base = \"https://internal-nginx-svc:12443/ae/\"\n    url_suffix = \"/v2/jobs\"\n  }\n\n  rolling-update {\n    maxThreadsRollingUpdate = 10\n    maxWaitSingleTenant = 1000\n    maxWaitMultiTenant = 2000\n  }\n\n  async_persistant_storage.base_dir = \"/manager-pvc\"\n\n  virtual_deployment {\n    images {\n      scikit_learn_0_20 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\"\n      xgboost_0_82 = \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\"\n    }\n  }\n\n  rabbitmq {\n    subscriber.timeout.seconds = 10\n    exchange = \"scoring-fvt\"\n    queue_expiration_hours = 24\n    threadpool.size = 50\n    queues = [\"non-do-job-queue\", \"do-job-queue\"]\n    do_queue_name = \"do-job-queue\"\n    non_do_queue_name = \"non-do-job-queue\"\n    routing_keys = [\"non_do_routing_key\", \"do_routing_key\"]\n    do_queue_routing_key = \"do_routing_key\"\n    non_do_queue_routing_key = \"non_do_routing_key\"\n  }\n\n  jobs_thread {\n    post_factor = 50\n  }\n\n  aios {\n      skip_list = []\n  }\n\n  pod_spawn {\n    memory_factor = 0.7\n    deploy_by_number = true\n  }\n\n  etcd_fetch_limit = 1200\n  one_node {\n    pod_cleanup {\n      delay_interval = 900\n      interval = 1200\n    }\n  }\n\n  autoai {\n     kb {\n       image_tag = \"{{.DockerRegistryPrefix}}/wml-autoai-kb:\"\n     }\n  }\n\n}\n\ngrpc {\n  service {\n    agent_interface = \"wml-scoring-rt-utils\"\n    agent_port = 16502\n  }\n}\n", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"caffe-runtime-config-fvt.json": "{\n  \"caffe\": {\n    \"1.0\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringcaffe10\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n      \"caffe_1.0\": {\n        \"caffe_1.0-py3\": \"1.0\"\n      }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}", "name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "do-runtime-config-fvt.json": "{\n  \"do\": {\n    \"12.9\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v2.5-b5\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-do12.9:v.1.0-cp4d-v2.5-b5\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/do/conf\",\n      \"configvolumemap\": \"wmlscoringdo\"\n    },        \n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"0\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"hybrid-runtime-config-fvt.json": "{\n  \"hybrid\": {\n    \"0.1\": {\n      \"current_version\":  \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.248.0.5\",\n      \"next_version\":  \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.248.0.5\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\"\n    },\n    \"0.2\": {\n      \"current_version\":  \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.248.0.5\",\n      \"next_version\":  \"{{.DockerRegistryPrefix}}/wml-os-runtimes-hybrid:v.0.1.248.0.5\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/hybrid/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    },\n    \"runtime_mapping\": {\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": { "keras-runtime-config-fvt.json": "{\n  \"keras\": {\n    \"2.2.4-tf\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringtf113\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"2.1.6\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringtf113\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"2.2.4\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringtf114\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n      \"keras_2.1.6\": {\n        \"tensorflow_1.13-py3\": \"2.1.6\",\n        \"tensorflow_1.13-py3.6\": \"2.1.6\"\n      },\n      \"keras_2.2.4-tf\": {\n        \"tensorflow_1.13-py3\": \"2.2.4-tf\",\n        \"tensorflow_1.13-py3.6\": \"2.2.4-tf\"\n      },\n      \"keras_2.2.4\": {\n        \"tensorflow_1.14-py3\": \"2.2.4\",\n        \"tensorflow_1.14-py3.6\": \"2.2.4\"\n      }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"mllib-runtime-config-fvt.json": "{\n  \"mllib\": {\n    \"2.2\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\"\n    },\n    \"2.3\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.3:v.0.1.501.0.7\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.3:v.0.1.501.0.7\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n      \"configvolumemap\": \"wmlscoringmllib\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\": {\n        \"lite\": {\n          \"retention_period\": \"0\"\n        },\n        \"standard\": {\n          \"retention_period\": \"0\"\n        },\n        \"professional\": {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\": {\n          \"retention_period\": \"0\"\n        }\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"204800\"\n}\n","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"pytorch-onnx-runtime-config-fvt.json": "{\n  \"pytorch-onnx\": {\n    \"1.0\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringpytorchonnx10\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"1.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringpytorchonnx11\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"xsmall\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    },\n    \"runtime_mapping\": {\n      \"pytorch-onnx_1.0\": {\n        \"pytorch-onnx_1.0-py3\": \"1.0\",\n        \"pytorch-onnx_1.0-py3.6\": \"1.0\",\n        \"pytorch_1.0-py3\": \"1.0\",\n        \"pytorch_1.0-py3-edt\": \"1.0\"\n      },\n      \"pytorch-onnx_1.1\": {\n          \"pytorch-onnx_1.1-py3.6\": \"1.1\",\n          \"pytorch-onnx_1.1-py3.6-edt\": \"1.1\"\n      }\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"scikit-runtime-config-fvt.json": "{\n    \"scikit-learn\": {\n      \"0.20\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n        \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n        \"configvolumemap\": \"wmlscoringsklearn20\",\n        \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n      },\n      \"size\": {\n        \"xsmall\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        },\n        \"xlarge\": {\n          \"memory\": \"8Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        }\n      },\n      \"runtime_mapping\": {\n        \"scikit-learn_0.20\": {\n          \"scikit-learn_0.20-py3\": \"0.20\",\n          \"scikit-learn_0.20-py3.6\": \"0.20\",\n          \"xgboost_0.82-py3\": \"0.20\",\n          \"xgboost_0.82-py3.6\": \"0.20\"\n        },\n        \"xgboost_0.82\": {\n          \"xgboost_0.82-py3\": \"0.20\",\n          \"xgboost_0.82-py3.6\": \"0.20\"\n        }\n      },\n      \"policy\": {\n        \"cold\":\n        {\n          \"lite\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"standard\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"professional\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"enterprise\":\n          {\n            \"retention_period\": \"0\"\n          }\n\n        }\n      }\n    },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"204800\"\n}\n","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"spss-modeler-runtime-config-fvt.json": "{\n  \"spss-modeler\": {\n    \"18.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.445.0.5\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.445.0.5\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/mlonlinespss/conf\",\n      \"configvolumemap\": \"wmlscoringspss\"\n    },\n    \"17.1\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.445.0.5\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-spss18.1:v.0.1.445.0.5\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/mlonlinespss/conf\",\n      \"configvolumemap\": \"wmlscoringspss\"\n    },\n    \"batch\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-batch-runtimes-spss18.1:v.0.1.445.0.5\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-batch-runtimes-spss18.1:v.0.1.445.0.5\",\n       \"configvolume\":\"/opt/ibm/mlonlinespss/conf\",\n       \"os_min_pods\":\"0\",\n        \"configvolumemap\":\"wmlscoringspss\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\": \"NORMAL\",\n  \"os_default_size\": \"0\"\n}\n","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"tensorflow-runtime-config-fvt.json": "{\n  \"tensorflow\": {\n    \"1.14\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g2-rt:v.0.1.61.0.7\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringtf114\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"1.13\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringtf113\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"xsmall\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n        \"tensorflow_1.13\": {\n          \"tensorflow_1.13-py3\": \"1.13\",\n          \"tensorflow_1.13-py3.6\": \"1.13\"\n        },\n        \"tensorflow_1.14\": {\n          \"tensorflow_1.14-py3\": \"1.14\",\n          \"tensorflow_1.14-py3.6\": \"1.14\"\n        }\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"83886080\"\n}","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"wml-runtime-config-fvt.json": "{\n    \"wml\": {\n      \"1.6\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\"\n      },\n      \"2.0\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\"\n      },\n      \"2.1\": {\n        \"current_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"next_version\": \"{{.DockerRegistryPrefix}}/wml-os-runtimes-mllib2.2:v.0.1.501.0.7\",\n        \"os_min_pods\": \"0\",\n        \"configvolume\": \"/opt/ibm/wml-online-scoring/runtimes/spark-2.1/conf\",\n        \"configvolumemap\": \"wmlscoringmllib\"\n      },\n      \"size\": {\n        \"small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        },\n        \"xlarge\": {\n          \"memory\": \"8Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_small\": {\n          \"memory\": \"2Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_medium\": {\n          \"memory\": \"4Gi\",\n          \"cpu\": \"2\"\n        },\n        \"batch_large\": {\n          \"memory\": \"6Gi\",\n          \"cpu\": \"2\"\n        }\n      },\n      \"runtime_mapping\": {\n      },\n      \"policy\": {\n        \"cold\":\n        {\n          \"lite\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"standard\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"professional\":\n          {\n            \"retention_period\": \"0\"\n          },\n          \"enterprise\":\n          {\n            \"retention_period\": \"0\"\n          }\n\n        }\n      }\n    },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"0\"\n}\n","name":"wmlruntimemanager"}}'

patch cm wmlruntimemanager -p '{"data": {"xgboost-runtime-config-fvt.json": "{\n  \"xgboost\": {\n    \"0.82\": {\n      \"current_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"next_version\": \"{{.DockerRegistryPrefix}}/wml-ubi-x86-ac201903-py368-g1-rt:v.0.1.61.0.8\",\n      \"os_min_pods\": \"0\",\n      \"configvolume\": \"/opt/ibm/scoring/python/conf-rt\",\n      \"pythoncommon\": \"/opt/ibm/scoring/python/conf-common\",\n      \"configvolumemap\": \"wmlscoringsklearn20\",\n      \"pythoncommonmap\": \"wmlscoringpythoncommon\"\n    },\n    \"size\": {\n      \"small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      },\n      \"xlarge\": {\n        \"memory\": \"8Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_small\": {\n        \"memory\": \"2Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_medium\": {\n        \"memory\": \"4Gi\",\n        \"cpu\": \"2\"\n      },\n      \"batch_large\": {\n        \"memory\": \"6Gi\",\n        \"cpu\": \"2\"\n      }\n    },\n    \"runtime_mapping\": {\n    },\n    \"policy\": {\n      \"cold\":\n      {\n        \"lite\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"standard\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"professional\":\n        {\n          \"retention_period\": \"0\"\n        },\n        \"enterprise\":\n        {\n          \"retention_period\": \"0\"\n        }\n\n      }\n    }\n  },\n  \"status\":\"NORMAL\",\n  \"os_default_size\": \"0\"\n}","name":"wmlruntimemanager"}}'

patch deployment  wmlrepository --patch '{"spec": {"template": {"spec": {"containers": [{"image": "{{.DockerRegistryPrefix}}/mlrepositoryservicehydra:v.0.1.1266.0.22","name": "wmlrepositoryservice","resources": {"limits": {"cpu": "2","memory": "3Gi"}}}]}}}}'

patch deployment  wmltraining --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wmltrainingservice","image": "{{.DockerRegistryPrefix}}/wmltrainingservicehydra:v.0.1.2248.0.7"}]}}}}'

patch deployment  wml-etcd  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-etcd","image": "{{.DockerRegistryPrefix}}/etcd-ubi:v.v3.3.5.1"}]}}}}'

patch deployment  wml-os-envoy  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-os-envoy","image": "{{.DockerRegistryPrefix}}/wml-os-envoy:v.0.1.116.0.2"}]}}}}'

patch statefulset  wml-scoring-rt-utils  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "agent-container","image": "{{.DockerRegistryPrefix}}/wml-os-runtime-agent:v.0.1.466.0.20"}]}}}}'

patch statefulset  wml-os-manager  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "runtimemanagercontainer","image": "{{.DockerRegistryPrefix}}/wml-os-runtime-manager:v.0.1.729.0.5"}]}}}}'

patch deployment  wml-main  --patch '{"spec": {"template": {"spec": {"containers": [{"name": "wml-main","image": "{{.DockerRegistryPrefix}}/wml-main:v2.5.0_020920"}]}}}}'

